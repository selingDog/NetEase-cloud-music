<template>
  <div class="fullScreen">
    <!-- 背景 -->
    <img :src="`${this.musicPicUrl}`" alt="" class="bgimg" v-if="!iscom" />
    <!-- 顶部 -->
    <div class="lyricTopLeft" v-if="!iscom">
      <!-- 返回 -->
      <div>
        <svg t="1687451999719" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
          p-id="1209" width="25" height="25" @click="$emit('toggleFullScreen', false), (isLyricShow = true)">
          <path
            d="M862.485 481.154H234.126l203.3-203.3c12.497-12.497 12.497-32.758 0-45.255s-32.758-12.497-45.255 0L135.397 489.373c-12.497 12.497-12.497 32.758 0 45.254l256.774 256.775c6.249 6.248 14.438 9.372 22.627 9.372s16.379-3.124 22.627-9.372c12.497-12.497 12.497-32.759 0-45.255l-203.3-203.301h628.36c17.036 0 30.846-13.81 30.846-30.846s-13.81-30.846-30.846-30.846z"
            fill="#ffffff" p-id="1210"></path>
        </svg>
      </div>
      <div class="name">
        <p>{{ music.name }}</p>
        <span v-for="(artist, i) in music.song.artists" :key="i" class="playname">
          {{ artist.name }}
          <i v-if="i !== music.song.artists.length - 1"></i>
        </span>
      </div>
      <div class="lyricTopRight">
        <svg t="1687499394151" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
          p-id="1239" width="30" height="30">
          <path
            d="M601.6 699.733333l-200.533333-110.933333C375.466667 618.666667 341.333333 640 298.666667 640c-72.533333 0-128-55.466667-128-128s55.466667-128 128-128c42.666667 0 81.066667 21.333333 106.666666 55.466667L640 320V298.666667c0-72.533333 55.466667-128 128-128s128 55.466667 128 128-55.466667 128-128 128c-46.933333 0-89.6-25.6-110.933333-64l-234.666667 115.2c4.266667 8.533333 4.266667 21.333333 4.266667 34.133333 0 12.8-4.266667 29.866667-8.533334 42.666667l196.266667 106.666666c25.6-38.4 64-64 110.933333-64 72.533333 0 128 55.466667 128 128s-55.466667 128-128 128-128-55.466667-128-128c0-8.533333 0-17.066667 4.266667-25.6zM298.666667 597.333333c46.933333 0 85.333333-38.4 85.333333-85.333333s-38.4-85.333333-85.333333-85.333333-85.333333 38.4-85.333334 85.333333 38.4 85.333333 85.333334 85.333333z m469.333333-213.333333c46.933333 0 85.333333-38.4 85.333333-85.333333s-38.4-85.333333-85.333333-85.333334-85.333333 38.4-85.333333 85.333334 38.4 85.333333 85.333333 85.333333z m-42.666667 426.666667c46.933333 0 85.333333-38.4 85.333334-85.333334s-38.4-85.333333-85.333334-85.333333-85.333333 38.4-85.333333 85.333333 38.4 85.333333 85.333333 85.333334z"
            fill="#ffffff" p-id="1240"></path>
        </svg>
      </div>
    </div>
    <div class="lyricContent" v-show="!isLyricShow" v-if="!iscom">
      <img src="@/assets/磁针.png" alt="" class="img_needle" :class="{ img_needle_active: !isbtnShow }" />
      <img src="@/assets/磁盘.png" alt="" class="img_cd" />
      <img :src="`${this.musicPicUrl}`" alt="" class="img_ar"
        :class="{ img_ar_active: !isbtnShow, img_ar_paused: isbtnShow }" @click="isLyricShow = true" />
    </div>
    <!-- 歌词 -->
    <div class="musicLyric" ref="musicLyric" v-show="isLyricShow" @click="isLyricShow = false">
      <p v-for="(item, i) in lyricArray" :key="i" :class="{
        active:
          currentTime * 1000 >= item.time && currentTime * 1000 < item.pre,
      }">
        {{ item.lrc }}
      </p>
    </div>
    <!-- 底部控制 -->
    <div class="lyricFooter" v-if="!iscom">
      <div class="footerTop">
        <svg t="1687512778104" class="icon" viewBox="0 0 1179 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
          p-id="1895" width="30" height="30">
          <path
            d="M142.31918 540.267127l350.13559 373.653781c54.296613 63.852817 139.806023 63.883844 195.033436-1.054906l362.204951-388.670672c42.661625-48.866952 65.466202-112.130263 65.466203-182.902021a279.239726 279.239726 0 0 0-501.018122-169.653647 30.99561 30.99561 0 0 1-25.534922 12.131415 30.99561 30.99561 0 0 1-25.503895-12.131415A279.239726 279.239726 0 0 0 62.053272 341.293309c0 72.850542 28.792718 144.242832 77.411458 195.498835 1.054906 1.116959 1.985705 2.264944 2.85445 3.474983z m-54.606879 31.926409A349.732244 349.732244 0 0 1 0 341.293309C0 152.806494 152.806184 0.00031 341.292999 0.00031c95.065613 0 183.708713 39.155615 247.313317 106.111096A340.486306 340.486306 0 0 1 835.95066 0.00031c188.486815 0 341.292999 152.806184 341.292999 341.292999 0 80.793361-25.069522 154.636755-72.198982 213.463257-1.147986 1.923651-2.482131 3.754223-4.095516 5.491715l-5.181449 5.553768c-2.699317 3.071637-5.491715 6.112247-8.315138 9.090804-0.620533 0.620533-1.210039 1.241065-1.861598 1.799545L733.810974 954.069375c-79.055869 93.048882-209.553901 93.017855-287.616918 1.147985L90.783938 576.040839a31.243823 31.243823 0 0 1-3.102664-3.847303z"
            fill="#ffffff" p-id="1896"></path>
        </svg>
        <svg t="1687512819159" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
          p-id="2083" width="30" height="30">
          <path
            d="M490.155 696.835c5.703 5.703 13.229 8.617 20.753 8.496 7.524 0 15.050-2.791 20.875-8.496l179.739-179.739c11.408-11.408 11.408-29.855 0-41.142-5.703-5.703-13.107-8.496-20.631-8.496s-14.928 2.791-20.631 8.496l-130.222 130.222v-483.389c0-16.142-12.986-29.127-29.127-29.127s-29.127 12.986-29.127 29.127v483.267l-130.222-130.222c-5.703-5.703-13.107-8.496-20.631-8.496s-14.928 2.791-20.631 8.496c-11.408 11.408-11.408 29.855 0 41.142l179.86 179.86z"
            fill="#ffffff" p-id="2084"></path>
          <path
            d="M883.007 497.194c-16.142 0-29.127 12.986-29.127 29.127 0 189.084-153.767 342.85-342.85 342.85s-342.85-153.767-342.85-342.85c0-16.142-12.986-29.127-29.127-29.127s-29.127 12.986-29.127 29.127c0 54.128 10.559 106.678 31.554 156.194 20.146 47.818 49.152 90.658 85.925 127.553 36.773 36.773 79.735 65.778 127.553 85.925 49.516 20.875 102.066 31.554 156.194 31.554 54.128 0 106.678-10.559 156.194-31.554 47.818-20.146 90.658-49.152 127.553-85.925 36.773-36.773 65.778-79.735 85.925-127.553 20.875-49.516 31.554-102.066 31.554-156.194-0.242-16.020-13.349-29.127-29.37-29.127z"
            fill="#ffffff" p-id="2085"></path>
        </svg>
        <svg t="1687512835154" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
          p-id="2417" width="30" height="30">
          <path
            d="M669.5936 670.72a264.22272 264.22272 0 0 1-175.9744-66.74432c-109.4656-97.1264-119.5008-265.19552-22.38464-374.65088s265.18528-119.5008 374.65088-22.39488 119.5008 265.18528 22.39488 374.64064C815.90272 640.60416 742.90176 670.72 669.5936 670.72z m0.28672-501.52448c-65.30048 0-130.304 26.81856-176.93696 79.38048-86.49728 97.49504-77.54752 247.17312 19.93728 333.6704s247.17312 77.54752 333.6704-19.93728c86.49728-97.49504 77.55776-247.18336-19.92704-333.6704a235.49952 235.49952 0 0 0-156.74368-59.4432z"
            p-id="2418" fill="#ffffff"></path>
          <path
            d="M367.26784 877.8752c-17.79712 0-35.84-6.22592-50.4832-18.7904l-48.3328-41.46176c-15.17568-13.02528-24.34048-30.86336-25.8048-50.20672a68.61824 68.61824 0 0 1 16.49664-50.28864C427.6736 521.39008 435.6096 521.2672 446.59712 521.08288l6.51264-0.1024 5.2224 5.10976-0.90112 19.61984c4.93568 5.376-8.56064 4.89472-5.92896 3.4304-17.96096 9.92256-132.66944 143.14496-170.36288 186.9312a39.77216 39.77216 0 0 0-9.55392 29.16352c0.88064 11.61216 6.47168 22.40512 15.75936 30.37184l48.3328 41.45152c18.60608 15.9744 46.94016 15.43168 63.19104-1.20832 93.67552-95.80544 166.0416-174.2848 172.09344-186.59328-0.68608 1.40288-1.86368-14.36672 0.9728-9.40032l11.99104 13.66016 1.20832-15.14496 13.04576 9.7792c3.98336 10.63936 6.8608 18.31936-178.54464 207.98464-14.12096 14.45888-33.10592 21.73952-52.36736 21.73952zM412.5696 361.90208l19.49696-21.504 327.68 296.93952-19.48672 21.51424z"
            p-id="2419" fill="#ffffff"></path>
          <path
            d="M222.33088 884.41856a67.7888 67.7888 0 0 1-8.04864-0.48128c-38.18496-4.5056-65.95584-39.96672-111.9744-98.7136l-6.88128-8.76544 22.8352-17.92 6.89152 8.78592c41.3696 52.81792 66.34496 84.69504 92.52864 87.78752 19.41504 2.23232 44.76928-10.3424 84.93056-42.24l18.05312 22.74304c-42.94656 34.10944-72.28416 48.80384-98.33472 48.80384z"
            p-id="2420" fill="#ffffff"></path>
        </svg>

        <svg t="1687512860694" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
          p-id="2607" width="30" height="30" @click="tocom(true)">
          <path
            d="M512 799.44c-24.12586667 0-48.2816-2.19413333-71.33546667-6.58453333l-167.84 102.048v-168.96c-87.7888-61.45386667-143.712-155.792-143.712-261.12106667 0-185.41226667 171.1232-335.72693333 382.8864-335.72693333 211.73013333 0 382.88533333 150.31466667 382.88533334 335.72693333S723.72906667 799.44 512 799.44z m0-622.0608c-185.42826667 0-335.7408 128.36693333-335.7408 287.44426667 0 97.6384 57.06133333 183.21493333 142.64 234.78186666V811.52l113.01973333-68.02133333c26.30186667 5.48053333 52.64213333 8.7616 81.18506667 8.7616 185.39946667 0 335.712-128.36693333 335.712-287.43786667C847.7056 305.74506667 697.39413333 177.3792 512 177.3792z m167.8368 263.30026667H344.12906667c-13.16693333 0-24.12693333-10.976-24.12693334-24.12693334 0-13.16693333 10.95893333-24.13866667 24.128-24.13866666h335.70666667c13.20213333 0 24.16106667 10.9728 24.16106667 24.13866666-0.00106667 13.152-10.96 24.128-24.16 24.128z m-287.42613333 95.44533333h239.17546666c13.168 0 24.12586667 10.98986667 24.12586667 24.14186667 0 13.16906667-10.9568 24.1408-24.12586667 24.1408H392.41066667c-13.1648 0-24.1248-10.97173333-24.1248-24.1408 0-13.152 10.96106667-24.14293333 24.1248-24.14293334z m0 0"
            p-id="2608" fill="#ffffff"></path>

        </svg>
        <svg t="1687512883966" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
          p-id="2795" width="30" height="30">
          <path
            d="M512 704c35.2 0 64 28.8 64 64s-28.8 64-64 64-64-28.8-64-64 28.8-64 64-64z m-64-192c0 35.2 28.8 64 64 64s64-28.8 64-64-28.8-64-64-64-64 28.8-64 64z m0-256c0 35.2 28.8 64 64 64s64-28.8 64-64-28.8-64-64-64-64 28.8-64 64z"
            p-id="2796" fill="#ffffff"></path>
        </svg>
      </div>
      <div class="footerContent">
        <input type="range" class="range" min="0" :max="this.duration" v-model="currentTime" step="0.05" />
      </div>
      <div class="footer">
        <!-- 播放方式 -->
        <svg t="1687513066530" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
          p-id="3164" width="40" height="40">
          <path
            d="M342.69 297.61c-22.96 0-41.3-18.63-41.3-41.32 0-22.67 18.34-41.03 41.3-41.03h457.64c61.35 0 117.2 25.32 157.94 65.49 40.76 40.71 65.73 96.88 65.73 158.23v146.07c0 61.65-24.97 117.52-65.73 158.23-40.73 40.17-96.58 65.46-157.94 65.46H342.69c-61.68 0-117.52-25.29-158.23-65.46-36.09-36.62-60.52-85.52-64.6-139.06h-95.4C11.09 604.22 0 592.88 0 579.52c0-6.71 2.93-13.1 7.57-17.16l67.21-67.82 67.8-67.48c9.29-9.59 24.73-9.59 34.32 0h0.56l67.5 67.48 67.21 67.82c9.58 9.29 9.58 25 0 34.91-5.24 4.65-12.22 7.57-19.23 6.95h-91.02c4.05 31.15 18.9 59.66 40.11 80.9h0.3c25.88 25.59 61.41 41.56 100.37 41.56h457.64c38.66 0 74.16-15.98 99.75-41.56C925.97 659.53 942 624.01 942 585.05V438.98c0-38.96-16.03-74.46-41.91-100.05-25.59-25.91-61.09-41.32-99.75-41.32H342.69zM187.63 555.35h47.74l-25.32-25.88v-0.27l-50.32-50.05-50.34 50.05v0.27L83.8 555.35h103.83z"
            fill="#ffffff" p-id="3165"></path>
        </svg>
        <!-- 上一首 -->
        <svg t="1687513090426" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
          p-id="1300" width="40" height="40">
          <path
            d="M803.584 134.592c-18.176-10.048-39.936-10.112-58.112 0L192 443.008l0-282.88c0-17.664-14.336-32-32-32S128 142.464 128 160.128l0 344.896C127.744 507.2 127.104 509.248 127.104 511.488S127.744 515.84 128 518.016l0 346.112c0 17.664 14.336 32 32 32s32-14.336 32-32L192 579.968l553.408 308.352C754.56 893.44 764.48 896 774.528 896s19.968-2.56 29.056-7.616c18.176-10.112 28.992-28.224 28.992-48.576L832.576 183.104C832.576 162.88 821.76 144.768 803.584 134.592zM768.192 829.248 198.016 511.488 771.328 192 768.192 829.248z"
            p-id="1301" fill="#ffffff"></path>
        </svg>
        <!-- 播放 -->
        <svg t="1687513197918" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
          p-id="5163" width="40" height="40" @click="play" v-if="isbtnShow">
          <path
            d="M712.106667 525.653333l-291.413334 247.893334a21.333333 21.333333 0 0 1-14.506666 5.546666 20.053333 20.053333 0 0 1-22.186667-19.2V264.106667a20.053333 20.053333 0 0 1 20.906667-19.2 20.906667 20.906667 0 0 1 14.506666 5.546666l291.413334 247.893334a17.92 17.92 0 0 1 1.28 27.306666zM512 0a512 512 0 1 0 512 512A512 512 0 0 0 512 0z"
            fill="#ffffff" p-id="5164"></path>
        </svg>
        <!-- 暂停 -->
        <svg t="1687515156362" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
          p-id="1548" width="40" height="40" @click="play" v-else>
          <path
            d="M703.146667 668.16a35.84 35.84 0 1 1-72.106667 0V355.84a35.84 35.84 0 1 1 72.106667 0z m-310.186667 0a35.84 35.84 0 1 1-72.106667 0V355.84a35.84 35.84 0 1 1 72.106667 0zM512 0a512 512 0 1 0 512 512A512 512 0 0 0 512 0z"
            fill="#ffffff" p-id="1549"></path>
        </svg>
        <!-- 下一首 -->
        <svg t="1687513108067" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
          p-id="1488" width="40" height="40">
          <path
            d="M832 160.128c0-17.664-14.336-32-32-32S768 142.464 768 160.128l0 282.88L214.592 134.592c-18.176-10.112-39.936-10.048-58.112 0C138.24 144.768 127.424 162.88 127.424 183.168l0 656.64c0 20.224 10.816 38.464 29.056 48.576C165.568 893.44 175.488 896 185.472 896s19.968-2.56 29.056-7.616L768 579.968l0 284.096c0 17.664 14.336 32 32 32s32-14.336 32-32L832 160.128zM191.808 829.248 188.672 192l573.312 319.488L191.808 829.248z"
            p-id="1489" fill="#ffffff"></path>
        </svg>
        <!-- 歌单 -->
        <svg t="1687513281251" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
          p-id="1360" width="40" height="40" @click="isPlayListShow">
          <path
            d="M42.666667 106.666667a21.333333 21.333333 0 0 1 21.333333-21.333334h896a21.333333 21.333333 0 0 1 0 42.666667H64a21.333333 21.333333 0 0 1-21.333333-21.333333z m21.333333 405.333333h597.333333a21.333333 21.333333 0 0 0 0-42.666667H64a21.333333 21.333333 0 0 0 0 42.666667z m384 341.333333H64a21.333333 21.333333 0 0 0 0 42.666667h384a21.333333 21.333333 0 0 0 0-42.666667z m516.513333-299.146666a21.333333 21.333333 0 0 1-25.333333-16.34c-2.726667-12.586667-9.8-36.313333-26.533333-53.733334-7.213333-7.446667-15.273333-12.886667-23.98-16.113333a21.18 21.18 0 0 1-4.36-2.186667A140.893333 140.893333 0 0 1 853.333333 438v436.666667c0 15.633333-4.5 30.666667-13.38 44.666666-8.053333 12.666667-19.333333 23.94-33.613333 33.44-27.64 18.433333-64 28.58-102.34 28.58s-74.666667-10.146667-102.34-28.58c-14.253333-9.5-25.56-20.746667-33.613333-33.44-8.88-14-13.38-29.013333-13.38-44.666666s4.5-30.666667 13.38-44.666667c8.053333-12.666667 19.333333-23.94 33.613333-33.44C629.333333 778.146667 665.646667 768 704 768s74.666667 10.146667 102.34 28.58c1.48 0.98 2.913333 2 4.326667 3.006667V320a21.333333 21.333333 0 0 1 42.626666-1.266667c1.073333 18.04 5.806667 52.666667 25.446667 82.08 7.713333 11.553333 16.846667 21.006667 27.153333 28.133334 13.853333 5.513333 26.453333 14.113333 37.493334 25.606666 22.813333 23.753333 32.966667 53.493333 37.466666 74.266667a21.333333 21.333333 0 0 1-16.34 25.366667zM810.666667 874.666667c0-20.82-17.54-35.62-28-42.586667-20.706667-13.806667-48.666667-21.413333-78.666667-21.413333s-58 7.606667-78.666667 21.413333c-10.453333 6.966667-28 21.766667-28 42.586667s17.54 35.62 28 42.586666c20.706667 13.806667 48.666667 21.413333 78.666667 21.413334s58-7.606667 78.666667-21.413334c10.46-6.966667 28-21.766667 28-42.586666z"
            fill="#ffffff" p-id="1361"></path>
        </svg>
        <!-- 播放列表 -->
        <div class="playList" v-if="playListShow">
          <playList></playList>
        </div>
      </div>
    </div>
    <!-- 歌曲评论 -->
    <div class="com" v-if="iscom">
      <div class="com-top">
        <div>
          <svg t="1687451999719" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
            p-id="1209" width="25" height="25" @click="tocom(false)">
            <path
              d="M862.485 481.154H234.126l203.3-203.3c12.497-12.497 12.497-32.758 0-45.255s-32.758-12.497-45.255 0L135.397 489.373c-12.497 12.497-12.497 32.758 0 45.254l256.774 256.775c6.249 6.248 14.438 9.372 22.627 9.372s16.379-3.124 22.627-9.372c12.497-12.497 12.497-32.759 0-45.255l-203.3-203.301h628.36c17.036 0 30.846-13.81 30.846-30.846s-13.81-30.846-30.846-30.846z"
              fill="#000000" p-id="1210"></path>
          </svg>
        </div>
        <div class="title">评论</div>
        <div class="lyricTopRight">
          <svg t="1687499394151" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
            p-id="1239" width="30" height="30">
            <path
              d="M601.6 699.733333l-200.533333-110.933333C375.466667 618.666667 341.333333 640 298.666667 640c-72.533333 0-128-55.466667-128-128s55.466667-128 128-128c42.666667 0 81.066667 21.333333 106.666666 55.466667L640 320V298.666667c0-72.533333 55.466667-128 128-128s128 55.466667 128 128-55.466667 128-128 128c-46.933333 0-89.6-25.6-110.933333-64l-234.666667 115.2c4.266667 8.533333 4.266667 21.333333 4.266667 34.133333 0 12.8-4.266667 29.866667-8.533334 42.666667l196.266667 106.666666c25.6-38.4 64-64 110.933333-64 72.533333 0 128 55.466667 128 128s-55.466667 128-128 128-128-55.466667-128-128c0-8.533333 0-17.066667 4.266667-25.6zM298.666667 597.333333c46.933333 0 85.333333-38.4 85.333333-85.333333s-38.4-85.333333-85.333333-85.333333-85.333333 38.4-85.333334 85.333333 38.4 85.333333 85.333334 85.333333z m469.333333-213.333333c46.933333 0 85.333333-38.4 85.333333-85.333333s-38.4-85.333333-85.333333-85.333334-85.333333 38.4-85.333333 85.333334 38.4 85.333333 85.333333 85.333333z m-42.666667 426.666667c46.933333 0 85.333333-38.4 85.333334-85.333334s-38.4-85.333333-85.333334-85.333333-85.333333 38.4-85.333333 85.333333 38.4 85.333333 85.333333 85.333334z"
              fill="#000000" p-id="1240"></path>
          </svg>
        </div>
      </div>
      <comment-list :commentList="commentList" class="list" />
    </div>
  </div>
</template>

<script>
import playList from "@/components/playList.vue";
import commentList from "@/components/commentList.vue";
export default {
  name: "fullScreen",
  props: {
    music: {
      type: Object,
      default: {},
    },
    play: {},
    isbtnShow: {},
    currentTime: {},
    duration: {},
  },
  data() {
    return {
      iscom: false,
      lyricArray: [],
      picUrl: "",
      musicPicUrl: "",
      isLyricShow: false,
      commentList: [],
      page: 1,
      playListShow: false,
    };
  },
  components: {
    commentList,
    playList,
  },
  methods: {
    isPlayListShow() {
      this.playListShow = !this.playListShow
    },
    getLyricData() {
      this.$axios
        .get("https://apis.netstart.cn/music/lyric?id=" + this.music.id)
        .then((res) => {
          // console.log(res.data);
          this.lyricArray = res.data.lrc.lyric
            .split(/[(\r\n)\r\n]+/)
            .map((item, i) => {
              let min = item.slice(1, 3);
              let sec = item.slice(4, 6);
              let mill = item.slice(7, 10);
              let lrc = item.slice(11, item.length);
              let time =
                parseInt(min) * 60 * 1000 +
                parseInt(sec) * 1000 +
                parseInt(mill);
              if (isNaN(Number(mill))) {
                mill = item.slice(7, 9);
                lrc = item.slice(10, item.length);
                time =
                  parseInt(min) * 60 * 1000 +
                  parseInt(sec) * 1000 +
                  parseInt(mill);
              }
              // console.log(min,sec,Number(mill),lrc);
              return { min, sec, mill, lrc, time };
            });
          this.lyricArray.forEach((item, i) => {
            if (
              i == this.lyricArray.length - 1 ||
              isNaN(this.lyricArray[i + 1].time)
            ) {
              item.pre = 100000;
            } else {
              item.pre = this.lyricArray[i + 1].time;
            }
          });
          // console.log(this.lyricArray);
          // console.log(this.currentTime);
        });
    },
    getMusicPicUrl() {
      // console.log(this.music.picUrl);
      if (this.music.picUrl) {
        this.musicPicUrl = this.music.picUrl;
      } else {
        this.musicPicUrl = this.music.al.picUrl;
      }
      // console.log(this.musicPicUrl);
    },
    getComment() {
      this.$axios
        .get("https://apis.netstart.cn/music/comment/music?id=" + this.music.id)
        .then((res) => {
          // console.log(res.data);
          this.commentList = res.data;
          console.log(this.commentList);
        });
    },
    tocom(val) {
      this.iscom = val;
    }
  },
  created() {
    this.getLyricData();
    this.getMusicPicUrl();
    this.getComment();
  },
  watch: {
    currentTime() {
      //监听歌词位置
      let p = document.querySelector("p.active");
      if (p) {
        if (p.offsetTop > 250) {
          this.$refs.musicLyric.scrollTop = p.offsetTop - 250;
        }
      }
      // console.log([p]);
    },
  },
  mounted() {
    console.log(this.duration);
    // this.updateDuration();
  },
};
</script>

<style lang="scss" scoped>
.fullScreen {
  //padding: 5px;
  position: fixed;
  top: 0px;
  bottom: 0px;
  left: 0;
  right: 0;
  background: pink;
  color: white;

  .bgimg {
    width: 100%;
    height: 100%;
    position: absolute;
    z-index: -1;
    filter: blur(70px); //虚化
  }

  .lyricTopLeft {
    padding: 5px;
    text-align: center;
    display: flex;
    justify-content: space-between;
    align-items: center;

    // background: red;
    .name {
      width: 200px;
      height: 50px;
      white-space: nowrap;
      overflow: hidden;

      p {
        font-size: 16px;
        font-weight: bold;
      }

      span {
        color: #f1f1f1;
      }
    }
  }

  // .lyricArray {
  //     .lyric {
  //         width: 88%;
  //         height: 550px;
  //         margin: 10px auto;
  //         border: 1px solid brown;
  //         overflow: auto;
  //         text-align: center;

  //         li {
  //             &.active {
  //                 color: pink;
  //                 font-size: 17px;
  //             }
  //         }
  //     }

  // }

  // .opera {

  //     //width: 100%;
  //     input {
  //         //display: block;
  //         width: 100%;
  //     }

  //     .all {
  //         margin-top: 20px;
  //         display: flex;
  //         justify-content: space-around;
  //     }
  // }
}

.lyricContent {
  padding: 5px;
  width: 100%;
  height: 450px;
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;

  .img_needle {
    width: 100px;
    height: 150px;
    position: absolute;
    left: 46%;
    transform-origin: 0 0;
    transform: rotate(-13deg);
    transition: all 2s;
  }

  .img_needle_active {
    width: 100px;
    height: 150px;
    position: absolute;
    left: 46%;
    transform-origin: 0 0;
    transform: rotate(0deg);
    transition: all 2s;
  }

  .img_cd {
    width: 250px;
    height: 250px;
    position: absolute;
    bottom: 115px;
    z-index: -1;
  }

  .img_ar {
    width: 160px;
    height: 160px;
    border-radius: 50%;
    position: absolute;
    bottom: 157px;
    animation: rotate_ar 10s linear infinite;
  }

  .img_ar_active {
    animation-play-state: running;
  }

  .img_ar_paused {
    animation-play-state: paused;
  }

  @keyframes rotate_ar {
    0% {
      transform: rotateZ(0deg);
    }

    100% {
      transform: rotateZ(360deg);
    }
  }
}

.musicLyric {
  padding: 5px;
  // width: 100%;
  height: 400px;
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 10px 10px 0 10px;
  overflow: scroll;
  box-sizing: content-box;

  p {
    color: #c4c4c4;
    margin-bottom: 15px;
    text-align: center;
  }

  .active {
    color: #fff;
    font-size: 20px;
  }
}

.lyricFooter {
  padding: 5px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  width: 100%;
  height: 160px;
  position: absolute;
  bottom: 10px;

  .footerTop {
    display: flex;
    justify-content: space-around;
  }

  .footerContent {
    .range {
      width: 355px;
      height: 3px;
    }
  }

  .footer {
    display: flex;
    justify-content: space-around;
  }
}

.com {
  background-color: white;
  width: 100%;
  height: 100%;
  overflow: scroll;

  .com-top {
    margin: 5px;
    text-align: center;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }


  .title {
    color: black;
  }
}
</style>